<%= erb :"components/link", :locals => {link: comp.link, preamble: true} %>
<div class="card-<%= comp.id %> mdl-card mdl-shadow--4dp"
     style="<%="width: #{comp.width};" if comp.width%>
            <%="width: 100%;" unless comp.width%>
       <%= "height: #{comp.height};" if comp.width && comp.width == comp.height %>
       <%= "min-height: auto;" %>
       <%= "outline: medium solid rgb(63,81,181);" if comp.selected %>">
  <% if comp.title %>
  <div class="mdl-card__title mdl-card--expand"
     style="<%= "color: #{comp.title.color};" if comp.title&.color%>
            <%= "height: #{comp.height};" if comp.height && comp.width != comp.height%>
            <%= "background: url('#{comp.title.background.image.url}') #{comp.title.background.options};" if comp.title&.background&.image %>
            <%= "background-color: #{comp.title.background.color};" if comp.title&.background&.color %>">
    <%= erb :"components/button", :locals => {:comp => comp.title.button, class_name:nil} %>
    <% if comp.title.text.any? %>
      <h2 class="mdl-card__title-text"
          style="<%= 'align-self: flex-start;' if comp.title&.align == :top%>"
      ><%= comp.title.text.map {|line| "#{line}<br/>"}.join %></h2>
    <% end %>
  </div>
  <% end %>

  <% if comp.image %>
    <div class="mdl-card__media">
      <img src="<%= comp.image.url %>" height="<%= comp.image.height %>" width="<%= comp.image.width %>" border="0" alt="">
    </div>
  <% end %>

  <% if comp.text %>
    <div class="mdl-card__supporting-text"><%= comp.text %></div>
  <% end %>


  <% if comp.action&.button %>
    <div class="mdl-card__actions mdl-card--border">
      <% if comp.action.button %>
        <%= erb :"components/button", :locals => {:comp => comp.action.button} %>
      <% end %>
    </div>
  <% end %>
  <% if comp.menu %>
    <div class="mdl-card__menu"
         style="<%= "color: #{comp.title.color};" if comp.title&.color %>
                <%='left: 16px;' if comp.menu.side==:left%>">
      <% if comp.menu %>
        <%= erb :"components/menu", :locals => {:comp => comp.menu} %>
      <% end %>

    </div>
  <% end %>
  <%= erb :"components/render", :locals => {:components => comp.components, :scope=> nil} %>
</div>
<%= erb :"components/link", :locals => {link: comp.link, preamble: false} %>
<%= erb :"components/link", :locals => {link: comp.link, preamble: false} %>

