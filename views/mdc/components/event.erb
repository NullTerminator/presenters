<% if events
     data_events = events.map do |event|
       [event.event,
        event.actions.map do |action|
          require_relative "actions/#{action.type}"
          # Deligate the action data to each action class
          # [Type, URL, Options, Params] these are passed into javascript event/action class constructors
          # Only the type need be canonical, the rest is defined between this class and its javascript
          Object.const_get("::WebClient::Actions::#{inflector.camelize(action.type)}").new.call(action, parent_id, @grid_nesting)
        end,
       {once: false}]
     end %>
  data-events = '<%= data_events.to_json %>'
<% end %>
